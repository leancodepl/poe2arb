builds:
  - targets:
      - linux_amd64
      - windows_amd64
      - darwin_amd64
      - darwin_arm64
    ldflags:
      - >
        -s -w
        -X github.com/leancodepl/poe2arb/cmd.Version={{.Version}}
universal_binaries:
  - replace: true
changelog:
  use: github-native
release:
homebrew_casks:
  - name: poe2arb
    homepage: https://github.com/leancodepl/poe2arb
    description: POEditor JSON to Flutter ARB converter.
    directory: Casks
    repository:
      owner: leancodepl
      name: poe2arb
    hooks:
      post:
        install: |
          if OS.mac?
            system_command "/usr/bin/xattr", args: ["-dr", "com.apple.quarantine", "#{staged_path}/poe2arb"]
          end
          generate_completions_from_executable(bin/"poe2arb", "completion")
